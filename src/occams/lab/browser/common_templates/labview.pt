<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="occams.lab"
      xml:lang="en"
      lang="en">
  <metal:content-core fill-slot="content-core">
    <metal:content-core define-macro="content-core">
        <metal:aliquot_navigation define-slot="aliquot_navigation">
            <metal:aliquot_navigation define-macro="aliquot_navigation">
              <h3> View Stored Aliquot </h3>
              <tal:data define="list view/list_aliquot">
                      <table class="listing">
                        <tr >
                          <td tal:repeat="aliquot list">
                            <a href="" tal:attributes="href aliquot/url">
                                 <img src="/++resource++occams.lab/images/allergy-vials-icon.png" />
                                <span tal:content="aliquot/title" />
                              </a>
                          </td>
                        </tr>
                      </table>
              </tal:data>
            </metal:aliquot_navigation>
        </metal:aliquot_navigation>
        <metal:filter define-slot="lab_filter">
            <metal:filter define-macro="lab_filter">
                <h3>
                  <metal:link define-slot="filter_link">
                  <a class="lab_filter" href="./labfilter" tal:attributes="href string:${context/absolute_url}/labfilter">
                    <img alt="Apply a filter" title="Apply a filter" src="/++resource++occams.lab/images/filter-icon.png" />
                  Apply a Filter
                  </a>
                </metal:link>
                </h3>
                <strong>Current Filter:</strong>
                <ul tal:define="filters view/current_filter">
                    <li tal:repeat="filter filters"><strong tal:content="python:filter[0]" />: <span tal:replace="python:filter[1]" /></li>
                </ul>
            </metal:filter>
        </metal:filter>
        <metal:crudheader define-slot="crud_header" />
        <metal:crudform define-slot="crud_form">
            <metal:crudform define-macro="crud_form">
                 <tal:hascontent condition="view/entry_count">
                   <tal:formcontents replace="structure view/crud_form/render" />
                   <h4>Instructions</h4>
                    <ul>
                        <li tal:repeat="instruction view/instructions">
                            <b><span tal:replace="instruction/title" /></b> : <tal:instruction replace="structure instruction/description" />
                        </li>
                    </ul>
                </tal:hascontent>
                <tal:nocontent tal:condition="not:view/entry_count">
                    <metal:no_crud define-slot="no_crud">
<!--                         <tal:filter condition="view/has_filter">
 -->                            <h3>There are no items to display currently. This could be due to the filter. </h3>
<!--                         </tal:filter>
 -->                    </metal:no_crud>
                 </tal:nocontent>
            </metal:crudform>
        </metal:crudform>
    </metal:content-core>
  </metal:content-core>
</html>