<html i18n:domain="occams_lims" metal:use-macro="load:../master.pt">
  <metal:content-slot fill-slot="content-slot">

    <header class="page-header">
      <h1>${context.title}</h1>
      <nav metal:use-macro="load: ../header-nav.pt"></nav>
    </header>

    <form metal:use-macro="load: ../aliquot/filter-aliquot.pt"></form>

    <hr />

    <div class="well well-lg" tal:condition="not:has_aliquot">
      <h3 i18n:translate="">No aliquot found</h3>
      <p i18n:translate="">Please refine your search</p>
    </div>


      <table class="table table-bordered table-hover table-striped" tal:condition="has_aliquot">
        <colgroup>
          <col class="id"></col>
          <col class="aliquot"></col>
          <col class="coordinates"></col>
          <col class="notes"></col>
          <col class="location"></col>
          <col class="sent_date"></col>
          <col class="sent_name"></col>
          <col class="sent_notes"></col>
        </colgroup>
        <thead>
          <tr>
            <th i18n:translate="">ID</th>
            <th i18n:translate="">Aliquot</th>
            <th i18n:translate="">Fr/Rk/Bx</th>
            <th i18n:translate="">Notes</th>
            <th i18n:translate="">Location</th>
            <th i18n:translate="">Sent Date</th>
            <th i18n:translate="">Recipient</th>
            <th i18n:translate="">Sent Notes</th>
          </tr>
        </thead>
        <tbody>
          <tal:draw repeat="sample aliquot">
            <tr>
              <td><code>${sample.id}</code></td>
              <td>
                <div class="pull-right"><code>${sample.store_date}</code></div>
                <div><code>${sample.specimen.patient.pid}</code></div>
                <div><strong>${sample.specimen.cycle.study.short_title} - ${sample.specimen.cycle.week}</strong></div>
                <div><span>${sample.aliquot_type.title}<span> &bull; <span>${sample.amount or '--'}${sample.amount and sample.aliquot_type.units}</span></div>
              </td>
              <td>${sample.freezer or '?'}/${sample.rack or '?'}/${sample.box or '?'}</td>
              <td>${sample.notes}</td>
              <td>${sample.location.title}</td>
              <td>${sample.sent_date}</td>
              <td>${sample.sent_name}</td>
              <td>${sample.sent_notes}</td>
            </tr>
          </tal:draw>
        </tbody>
      </table>

      <nav metal:use-macro="load: ../pager.pt"></nav>

    <div id="modal-target" class="modal fade"></div>

  </metal:content-slot>

</html>
